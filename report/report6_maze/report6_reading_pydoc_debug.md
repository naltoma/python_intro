# 課題レポート6: コード読解

- ＜目次＞
  - <a href="#abst">課題概要</a>
  - <a href="#howto">取り組み方</a>
  - <a href="#report">レポートに含める内容</a>
  - <a href="#level1">課題詳細</a>
  - <a href="#hints">ヒント</a>
  - <a href="#upload">提出方法</a>

<hr>

## <a name="abst">課題概要</a>
- 迷路生成プログラム [generate_maze.py](./generate_maze.py) を読んでみよう。
  - まずは上記ファイル（generate_maze.py）を作業ディレクトリにダウンロードせよ。
    - 下記コマンド（長いですが1行です）をターミナルで実行することでダウンロード可能。

```
curl -O https://raw.githubusercontent.com/naltoma/python_intro/master/report/report6_maze/generate_maze.py
```

- 達成目標
  - 他人が書いたコードを読んでみよう。
  - 変数名、関数名、ドキュメントやコメントの大切さに気付こう。
    - 実行するなという意味ではありません。むしろ積極的に実行やデバッグ実行も交えて読み解いてください。関数単位での実行や、関数の中身を部分的に切り出して実行してみるなど、「良くわからない部分があった場合、その処理の流れや処理対象の中身をどうやれば確認できるか」を考えつつ、試してみよう。
    - 210行程ですが、大半はドキュメント(docstring)とユニットテスト(doctest)です。実質的なコードは90行程度。
    - 実装対象をどのように表現（実装）しようとしているのかを読み取ろう。例えば、、、
      - そもそも迷路をどう表現しようとしているのか？
        - これまでに習った言語仕様からは、int, float, str, list, dictぐらいの型しかない。これらを使って迷路を実装する必要があるが、gengenerate_maze.pyではどう実装しているのか。（実装方法が一つしか無い訳ではない。今回のコードは一例に過ぎない）
      - 迷路で進める場所、進めない場所、それ以外の場所等、空間毎の意味合いをどう表現しているのか？
      - 迷路生成アルゴリズムはどうなっているのか？
  - docstringによるコメントの書き方の参考にしよう。
    - ファイル全体のコメント、関数のコメントをどのように書いてるだろうか？

<hr>

## <a name="howto">取り組み方</a>
- ペアや友人らと話し合って取り組んで構わないが、**自分自身の言葉で述べること。試して分かったこと、自身で解決できなかった部分等についてどう取り組んだか、といった過程がわかるように示すこと**。（考えを図表や文章を駆使して表現して報告する練習です）

<hr>

## <a name="report">レポートに含める内容</a>
- レポート作成は当面「googleドキュメント」を使うこと。
- レポートには下記を含めること。
  - **タイトル**
    - 今回は【プログラミング1、レポート課題6: 「コード読解」】。
  - **提出日**: yyyy-mm-dd
  - **報告者**: 学籍番号、氏名
    - 複数人で相談しながらやった場合、相談者らを「協力者: 学籍番号、氏名」として示そう。
  - **課題説明**
    - 1,2行程度で課題の内容を説明しよう。
  - **課題に対する取り組み**
    - <a href="#level">課題詳細</a>を参照すること。
    - 課題への取り組みを通し、課題の意義、課題から分かったこと、今後の展望などを述べる。失敗やつまづきがあれば、それらについての失敗分析を含めること。
    - 参考リンク: [実験レポートの書き方](http://www.report.gusoku.net/jikken/jikkenreport.html)
  - その他
    - 通常は感想等をレポートには含めませんが、練習なので課題に取り組みながら何か感じたこと、悩んでいること等、書きたいことがあれば自由に書いてください。（なければ省略OK）

<hr>

## <a name="level">課題詳細</a>
以下に示す4点について取り組み、レポートとしてまとめよ。なお、5番目の課題は余裕がある人向けのオマケ課題です。やってみたい人はどうぞ。

- **1. docstringドキュメントの外観**
  - docstringで記述されたドキュメントを help() もしくは pydoc により読み、「**スクリプトファイルのどの部分が、help/pydocにおいてどのように出力されているか**」について気づいた点について報告せよ。
  - ここではドキュメントの内容は詳細に読む必要はない。docstringの機能について気づいた点を報告してください（数行程度でok）。
- **2. doctestの実行**
  - doctestで記述されたユニットテストを実行し、テスト結果を報告せよ。レポートには以下の項目を報告すること。
    - (1)実行されたテスト数。
    - (2)テストが成功した数。
    - (3)テストが失敗した数。
    - (4)テストが失敗した関数名。（複数ある場合には複数列挙すること）
- **3. ドキュメント詳細読み**
  - コードやdocstringドキュメントを読み、def宣言されている全関数（5個）の機能について概説（数行程度でOK）せよ。また、コードやドキュメントで気になる部分があれば、その部分について言及せよ。
  - 補足
    - 読んで理解することが趣旨ですが、実行するなという意味ではありません。積極的に実行やデバッグ実行も交えて読み解いてください。関数単位での実行や、関数の中身を部分的に切り出して実行してみるなど、動作確認方法を考えつつ試してみよう。
- **4. テスト失敗箇所の要因分析＋コード修正**
  - テストコードと実コードとを見比べ、テストが失敗している原因を分析せよ。その分析結果を元に、テストが通るように実コードを修正せよ。
  - レポートには少なくとも、(1)テストが失敗している原因、(2)コードの修正箇所、の2点について報告すること。また、(2)については下記の手順で報告すること。
    - (2)の修正箇所を報告する手順。
      - Step 1: 修正を始める前に、オリジナルのファイルを「orig.py」というファイル名で複製して残す。（もし既に修正してしまったのであれば、もう一度オリジナルのファイルをダウンロードし直そう。上書きされないように注意）
      - Step 2: 「generate_maze.py」を編集してテストが通るように修正する。
      - Step 3: テストが通ったら、シェル上で「diff orig.py generate_maze.py」を実行せよ。この結果をレポートに掲載すること。（diffコマンドは2つのファイルの差分を確認するためのコマンドです）
- **5. （余裕がある人向け）おまけ**
  - 現時点でのコードには、まだブロックのままの箇所があまりにも多い。なんとかして「より迷路を広げる工夫」を考えられないだろうか。
  - （今回の課題を無視して）他の迷路生成プログラムを実装してみよう。

<hr>

## <a name="hints">ヒント</a>
- doctestの実行方法
  - ファイル実行するなら、[Python標準ライブラリ](https://docs.python.org/ja/3/library/)からdoctestの使い方を探すか、授業資料を参照しよう。
  - PyCharmで実行する場合、デフォルトでdoctest実行してくれる。
  - 逆に、PyCharmで通常実行するためには、以下のように追加設定する必要がある。
    - step 0: 事前に新規プロジェクトを用意し、generate_maze.pyをそのプロジェクト内にコピーする。
    - step 1: Runメニューから「Edit Configurations...」を選択。
    - step 2: 左上の「＋」を押して設定ファイルを追加。
      - 追加時に「Python」を選ぶと、通常のPython実行の設定ファイルを作成できる。
      - 「Name欄」に、自分が分かりやすい名前をつけよう。普通はスクリプトファイル名そのものが分かりやすいはず。
      - 「Scriptpath欄」に、右端のフォルダアイコンをクリックして、generate_maze.pyを選択する。
      - 「Python Interpreter」が /anaconda3/bin/python になっていることを確認。
      - 右下の Apply を押して、OK。
    - step 3: 設定ファイルを指定。
      - 今の状態で Run をしても、当初の doctest 実行のままになっている。これを切り替えるためには、どの設定ファイルで実行するかを指定する必要がある。
      - 設定ファイルの指定は、「右上 Run アイコンの左欄」から行う。今は「Doctest in generate_maze」になっているはず。これをstep 2で作成した設定ファイル名に変更しよう。
    - step 4: 実行。
      - 設定ファイルを指定後、Run実行するだけで後は通常実行になる。
      - doctest実行に切り替えたいなら、同様に右上から設定ファイルを変更して実行すると良い。

<hr>

## <a name="upload">提出方法</a>
- 提出物は「レポート」、「修正済みスクリプトファイル」の2点である。
  - もしそれ以外に作成したものがあるなら、それも提出しよう。
- レポートは電子ファイルで提出するものとする。
- 提出先＆〆切: 授業ページを参照。
